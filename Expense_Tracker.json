{
  "name": "Expense_Tracker",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -160,
        -80
      ],
      "id": "1f38fc7e-8c5c-4ee8-ac5c-f4ec37ffb319",
      "name": "When chat message received",
      "webhookId": "1ef514d3-0397-4c96-9f4d-3f4716d6fa2f"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are a helpful assistYou are an expert expense manager, Kindly analyze the input and segregate the output into 4 elements. \n\nRemaining balance is a running total. If the expense is credit, add it to the balance else subtract from the balance.\n\n1. Type of Expense (Credit/Debit)\n2. Category\n3. Amount\n4. Remaining Balance\n\nAfter every calculation, use google sheet tool to append the row.\n\nIf at any point the running balance is zero or negative, send out an email saying that you are bankrupt using Gmail tool"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        184,
        -80
      ],
      "id": "886d8b63-2458-4313-8ee2-d2cb8d48c700",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -96,
        144
      ],
      "id": "f0a1873c-b542-40a1-80e5-3290a20e5018",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "yQTm72uASJyP2rJc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 1
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        128,
        144
      ],
      "id": "38b91a58-0813-4f40-8bbb-d6bba35bf9b5",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1t7RXmBcErdKlfOcSz2KrJReD__5ZDc3Qc36i6cSnv_o",
          "mode": "list",
          "cachedResultName": "Expense Tracker",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1t7RXmBcErdKlfOcSz2KrJReD__5ZDc3Qc36i6cSnv_o/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1t7RXmBcErdKlfOcSz2KrJReD__5ZDc3Qc36i6cSnv_o/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Type of Expense": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Type_of_Expense', ``, 'string') }}",
            "Category": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Category', ``, 'string') }}",
            "Amount": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Amount', ``, 'string') }}",
            "Remaining Balance": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Remaining_Balance', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Type of Expense",
              "displayName": "Type of Expense",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Category",
              "displayName": "Category",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Amount",
              "displayName": "Amount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Remaining Balance",
              "displayName": "Remaining Balance",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        320,
        144
      ],
      "id": "0a04f4a2-1c8d-42bb-8ebf-98cc054344b5",
      "name": "Append row in sheet in Google Sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "bCfCXQcJdhs3ihuS",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "skuldeepagarwal@gmail.com",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        544,
        144
      ],
      "id": "73bf292e-b019-435a-8be6-07f42e5021a1",
      "name": "Send a message in Gmail",
      "webhookId": "b0f5e877-33bb-4d61-8a01-4c94543d45c9",
      "credentials": {
        "gmailOAuth2": {
          "id": "wPFW4D8AkxhIGDJu",
          "name": "Gmail account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet in Google Sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Send a message in Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "d6876199-254b-4ae3-99c2-92c9c336e67e",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "b78ad7a17e9b678c5bef53ee88d56b84ab61c972f6fef05e6f690c84fe59d9af"
  },
  "id": "f53EM6SVbClxzvBt",
  "tags": []
}